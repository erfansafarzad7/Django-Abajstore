{% extends 'base.html' %}
{% load static %}





{% block title %} تکمیل سفارش {% endblock %}


{% block style %} 
    <link rel="stylesheet" href="{% static 'styles/jalalidatepicker.min.css' %}" />
{% endblock %}




{% block content %} 

    
    
    

    <main class="lg:pt-[140px]">
      <section
        id="hiddenContent"
        class="bg-lowOpacityColorBg items-start hidden fixed z-[9] top-0 right-0 w-full h-screen"
      ></section>
      <section>
        <div
          class="container flex gap-2 text-lowGray text-[12px] text-nowrap overflow-auto"
        >
          <a href="{% url 'products:home' %}">صفحه اصلی</a>
          <span class="select-none">/</span>
          <p>تکمیل سفارش</p>
        </div>
      </section>
      <section
        id="hiddenContent"
        class="bg-lowOpacityColorBg items-start hidden fixed z-[9] top-0 right-0 w-full h-screen"
      ></section>
    
    
    {% if not carts %}
          <div class="sm:text-lg text-sm divTextAlert danger">
            <p>سبد خرید شما خالی است</p>
          </div>
    {% else %}
        
        
        
    
    
    
    
      <section>
        <div
          class="container flex lg:flex-row justify-between items-start flex-col p-2 gap-5"
        >
          <div
            class="flex flex-col w-full gap-4 divide-submitPageColorBorderLowBlack"
          >
              
              
              
            <div
              class="w-full border-b-4 border-submitPageColorBorderLowBlack lg:border-0 space-y-5 lg:boxBorder rounded-md p-3"
            >
              <h2 class="flex flex-col gap-2 py-4 w-[max-content]">
                <span>آدرس تحویل سفارش را انتخاب کنید:</span>
                <span class="w-1/3 bg-primary h-[2px]"></span>
              </h2>
                
                
              <div>
                <div id="selectedLiOptions">
                  <p id="selectedLiOptionsUserAddres"></p>
                  <p>
                    <i class="far fa-user"></i>
                    <span id="selectedLiOptionsUserName"></span>
                  </p>
                </div>
                <button id="showList" class="text-lowBlue text-sm">
                  افزودن یا ویرایش آدرس
                </button>

                <ul class="flex flex-wrap gap-2" id="addressCont"></ul>
              </div>
            </div>
              
              
              
              
            <div
              class="w-full border-b-4 border-submitPageColorBorderLowBlack lg:border-0 space-y-5 lg:boxBorder rounded-md p-3"
            >
              <h2 class="flex flex-col gap-2 py-4 w-[max-content]">
                <span>توضیحات سفارش (اختیاری):</span>
                <span class="w-1/3 bg-primary h-[2px]"></span>
              </h2>
                <textarea
                  name="user_dsc_textArea"
                  id="user_dsc_textArea"
                  class="w-full resize-y boxBorder h-[300px] border-submitPageColorBorderLowBlack border-2 py-2 px-2 outline-none focus:border-submitPageColorBorderBlue transition-[border]"
                >
                </textarea>
            </div>
          </div>
        
        
        
        
        
          <aside
            class="lg:max-w-[450px] lg:block w-full boxBorder rounded-md py-2 px-4"
          >
            <nav>
              <h1 class="relative w-max flex py-2">
                سفارش شما
                <span
                  class="absolute w-[80%] bottom-0 right-0 border border-primary"
                ></span>
              </h1>
              <div
                class="border-b-[6px] divide-y divide-submitPageColorBorderLowBlack text-lowGray py-2 border-submitPageColorBorderLowBlack flex flex-col gap-4"
              >
                <div class="flex justify-between text-blackColor">
                  <span>نام محصول</span>
                  <span>جمع</span>
                </div>
                <ul
                  class="space-y-3 text-sm divide-y divide-submitPageColorBorderLowBlack"
                >
                    
                    {% for cart in carts %}
                  <li class="flex justify-between py-2">
                    <span class="max-w-[200px]"
                      >{{ cart.product.name }}  × {{ cart.quantity }} عدد 
                    </span>
                    <span>{{ cart.cart_item_price }}<span>تومان</span></span>
                  </li>
                    {% endfor %}
                    
                    
                </ul>
                <div class="flex justify-between text-blackColor">
                  <span>جمع</span>
                  <span>{{ cart.calculate_total_price }}<span>تومان</span></span>
                </div>
                <div
                  data-dec="for show replace hidden with flex"
                  class="flex justify-between text-primary"
                >
                  <span>تخفیف</span>
                  <span>{{ cart.calculate_total_discount }}<span>تومان</span></span>
                </div>
{#                <div class="flex justify-between">#}
{#                  <span#}
{#                    >هزینه ارسال#}
{#                    <span class="text-sm px-2 text-[aqua]">{{ carts.count }} مرسوله</span>#}
{#                  </span>#}
{#                  <span>30,000<span>تومان</span></span>#}
{#                </div>#}

                <div class="flex justify-between text-blackColor">
                  <span>مبلغ قابل پرداخت </span>
                  <span>{{ cart.calculate_total_discounted_price }}<span>تومان</span></span>
                </div>
              </div>
              <form class="flex flex-col gap-4 py-4" method="post" >
                  {% csrf_token %}
{#                <label for="melate" class="payMethodCheckBox">#}
{#                  <input#}
{#                    type="radio"#}
{#                    name="payMethodName"#}
{#                    value="melate"#}
{#                    id="melate"#}
{#                    checked#}
{#                  />#}
{#                  <span class="checkmark"></span>#}
{#                  <span class="px-10">درگاه ملت</span>#}
{#                  <div class="dropDownPayMethod">#}
{#                    پرداخت با تمامی کارت های عضو شتاب#}
{#                  </div>#}
{#                </label>#}
                <label for="melate" class="payMethodCheckBox">
                    
                  {{ form.address }}
                  {{ form.address.errors }}
                    
                  <span class="checkmark"></span>
                  <span class="px-10">آدرس</span>
                  <div class="dropDownPayMethod">
                    آدرس
                  </div>
                </label>
{#                <label for="parsian" class="payMethodCheckBox">#}
{#                  <input#}
{#                    type="radio"#}
{#                    name="payMethodName"#}
{#                    value="parsian"#}
{#                    id="parsian"#}
{#                  />#}
{#                  <span class="checkmark"></span>#}
{#                  <span class="px-10">درگاه پارسیان</span>#}
{#                  <div class="dropDownPayMethod">#}
{#                    پرداخت با تمامی کارت های عضو شتاب#}
{#                  </div>#}
{#                </label>#}
{#                <label for="idPay" class="payMethodCheckBox">#}
{#                  <input#}
{#                    type="radio"#}
{#                    name="payMethodName"#}
{#                    value="idPay"#}
{#                    id="idPay"#}
{#                  />#}
{#                  <span class="checkmark"></span>#}
{#                  <span class="px-10">درگاه آیدی پی</span>#}
{#                  <div class="dropDownPayMethod">#}
{#                    پرداخت با تمامی کارت های عضو شتاب#}
{#                  </div>#}
{#                </label>#}
                <button type="submit"
                  id="submitProducts"
                  class="bg-redColor opacity-80 hover:opacity-100 transition-opacity duration-300 text-whiteColor py-3 w-full rounded-md"
                >
                  ثبت سفارش
                </button>
              </form>
            </nav>
          </aside>
        </div>
      </section>
    
    {% endif %}
    
    
    
{#      <section#}
{#        id="editCard"#}
{#        class="filterContWithAnimate hidden flex items-center justify-center bg-lowOpacityColorBg fixed w-full h-screen top-0 left-0 z-40 showFilterSec"#}
{#      >#}
{#        <div#}
{#          class="flex flex-col relative gap-4 text-sm bg-whiteColor h-full lg:h-max p-4 rounded-md lg:min-h-[400px] lg:w-1/2 w-full"#}
{#        >#}
{#          <div#}
{#            class="flex absolute right-0 px-4 z-10 bg-whiteColor top-0 w-full justify-between items-center border-b-4 border-submitPageColorBorderLowBlack py-2"#}
{#          >#}
{#            <h1>ویرایش آدرس</h1>#}
{#            <button id="closeWindow"><i class="fa fa-remove"></i></button>#}
{#          </div>#}
{#          <div#}
{#            class="sm:pb-[10px] pt-[60px] pb-[60px] overflow-y-auto space-y-4"#}
{#          >#}
{#            <div class="flex flex-col sm:flex-row gap-4">#}
{#              <div class="flex flex-col basis-[50%] py-2">#}
{#                <label>#}
{#                  استان#}
{#                  <strong class="text-primary">*</strong>#}
{#                </label>#}
{#                <select#}
{#                  name="asd"#}
{#                  disabled="true"#}
{#                  class="cursor-not-allowed bg-lowerGray p-2"#}
{#                >#}
{#                  <option value="yazd">یزد</option>#}
{#                </select>#}
{#              </div>#}
{#              <div class="flex flex-col basis-[50%] py-2">#}
{#                <label for="user_city">#}
{#                  استان#}
{#                  <strong class="text-primary">*</strong>#}
{#                </label>#}
{#                <select id="user_city" name="asd" class="bg-lowerGray p-2">#}
{#                  <option value="">شهر</option>#}
{#                </select>#}
{#              </div>#}
{#            </div>#}
{#            <div>#}
{#              <label for="user_addres">#}
{#                آدرس#}
{#                <strong class="text-primary">*</strong>#}
{#              </label>#}
{#              <input#}
{#                type="text"#}
{#                name="user_addres"#}
{#                class="border-submitPageColorBorderLowBlack border-2 w-full py-2 px-2 outline-none focus:border-submitPageColorBorderBlue transition-all"#}
{#                id="user_addres"#}
{#              />#}
{#            </div>#}
{#            <div>#}
{#              <label for="user_postCode">#}
{#                کدپستی#}
{#                <strong class="text-lowGreenColor">(اختیاری)</strong>#}
{#              </label>#}
{#              <input#}
{#                type="text"#}
{#                name="user_postCode"#}
{#                class="border-submitPageColorBorderLowBlack border-2 w-full py-2 px-2 outline-none focus:border-submitPageColorBorderBlue transition-all"#}
{#                id="user_postCode"#}
{#              />#}
{#            </div>#}
{#            <div>#}
{#              <label for="user_number">#}
{#                تلفن#}
{#                <strong class="text-primary">*</strong>#}
{#              </label>#}
{#              <input#}
{#                type="text"#}
{#                name="user_number"#}
{#                class="border-submitPageColorBorderLowBlack border-2 w-full py-2 px-2 outline-none focus:border-submitPageColorBorderBlue transition-all"#}
{#                id="user_number"#}
{#              />#}
{#            </div>#}
{#            <div>#}
{#              <label for="user_name">#}
{#                نام#}
{#                <strong class="text-primary">*</strong>#}
{#              </label>#}
{#              <input#}
{#                type="text"#}
{#                name="user_name"#}
{#                class="border-submitPageColorBorderLowBlack border-2 w-full py-2 px-2 outline-none focus:border-submitPageColorBorderBlue transition-all"#}
{#                id="user_name"#}
{#              />#}
{#            </div>#}
{#            <div>#}
{#              <label for="user_last_name">#}
{#                نام خانوادگی#}
{#                <strong class="text-primary">*</strong>#}
{#              </label>#}
{#              <input#}
{#                type="text"#}
{#                name="user_last_name"#}
{#                class="border-submitPageColorBorderLowBlack border-2 w-full py-2 px-2 outline-none focus:border-submitPageColorBorderBlue transition-all"#}
{#                id="user_last_name"#}
{#              />#}
{#            </div>#}
{#            <div#}
{#              class="flex gap-2 px-4 z-10 bg-whiteColor w-full justify-end items-center py-2"#}
{#            >#}
{#              <button#}
{#                id="closeAddresCont"#}
{#                class="bg-lowerGray py-3 px-5 rounded-md"#}
{#              >#}
{#                بستن#}
{#              </button>#}
{#              <button#}
{#                id="setAddres"#}
{#                class="bg-redColor opacity-80 hover:opacity-100 transition-opacity duration-300 text-whiteColor py-3 px-5 rounded-md"#}
{#              >#}
{#                ثبت#}
{#              </button>#}
{#            </div>#}
{#          </div>#}
{#        </div>#}
{#      </section>#}
    </main>
  
  
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
    
{% endblock %}





{% block scripts %} 
{% endblock %}





